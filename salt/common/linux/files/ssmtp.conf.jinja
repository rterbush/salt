{% set smtpconf = salt['pillar.get']('smtp') %}
#
# /etc/ssmtp.conf -- a config file for sSMTP sendmail.
#
# See the ssmtp.conf(5) man page for a more verbose explanation of the
# available options.
#
# The person who gets all mail for userids < 1000
# Make this empty to disable rewriting.
root=randy+ta@terbush.org

# The place where the mail goes. The actual machine name is required
# no MX records are consulted. Commonly mailhosts are named mail.domain.com
# The example will fit if you are in domain.com and your mailhub is so named.
mailhub={{ smtpconf.smtphost }}:{{ smtpconf.smtpport }}

# Where will the mail seem to come from?
RewriteDomain=terbush.org

# The full hostname
Hostname={{ grains['id'] }}

# Set this to never rewrite the "From:" line (unless not given) and to
# use that address in the "from line" of the envelope.
FromLineOverride=YES

# Use SSL/TLS to send secure messages to server.
UseTLS=YES
UseSTARTTLS=YES
#IMPORTANT: The following line is mandatory for TLS authentication
TLS_CA_File=/etc/pki/tls/certs/ca-bundle.crt

# Use SSL/TLS certificate to authenticate against smtp host.
UseTLSCert=NO

# Use this RSA certificate.
#TLSCert=/etc/pki/tls/private/ssmtp.pem

# Get enhanced (*really* enhanced) debugging information in the logs
# If you want to have debugging of the config file parsing, move this
# option to the top of the config file and uncomment
#Debug=YES

AuthMethod=LOGIN
AuthUser={{ smtpconf.smtpuser }}
AuthPass={{ smtpconf.smtppass }}